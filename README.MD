Телеграм-бот для поиска отелей

Данный телеграм-бот предназначен для поиска отелей по заранее заданным критериям.
Для корректной работы бота требуются следующие модули:

certifi==2022.12.7

charset-normalizer==3.1.0

idna==3.4

loguru==0.6.0

peewee==3.16.0

pyTelegramBotAPI==4.10.0

python-dateutil==2.8.2

python-dotenv==1.0.0

python-telegram-bot-calendar==1.0.5

requests==2.28.2

six==1.16.0

urllib3==1.26.15


В составе бота используются следующие файлы и директории:

main.py - основной скрипт запуска

loader.py - файл, который получает переменные окружения и подключает самого бота.

.env - файл, содержащий токен подключения бота к серверам Telegram и токен подключения к API hotels.com. Этот файл необходимо создать вручную. Обратите внимание на точку в начале имени файла.

requirements.txt - список необходимых зависимостей.

api_requests - директория, содержащая в себе функции для работы с API и, непосредственно, параметры, ссылки и заголовки для самих запросов к API.

commands_funcs - директория, где содержатся общие функции для команд lowprice, highprice, bestdeal(без запросов к API).

config_data - конфигурационные данные.

database - директория, содержащая классы для работы с базой данных. В данном проекте использвется база данных peewee.

handlers - директория, где содержатся основные команды для бота.

keyboards - директория, содержащая inline клавиатуры и календарь.

states - директория, где указаны состояния для команд lowprice, highprice, bestdeal.

utils - директория с утилитами.




Получение токенов
Для функционирования бота вам необходимо зарегистрировать бота в Telegram, а также зарегистрироваться на сайте http://rapidapi.com и получить токен для подключения к его API.
Полученные токены необходимо моместить в файл .env:


BOT_TOKEN = 'токен, полученный от botfather в Telegram'

API_KEY = 'токен, полученный от rapidapi.com'


Запуск
После установки необходимых зависимостей и проведения первичного конфигурирования можно запускать бота.

Запуск осуществляется командой python main.py

При первом запуске будет создана база данных, содержащая необходимые для функционирования бота таблицы.

После запуска бот станет доступен в Telegram под тем именем, которое вы для него выбрали.


Взаимодействие с ботом

Бот принимает определенный список команд:


/start 

вывод приветствия

/help 

Вывод списка команд для бота

/cancel 

Завершение любой команды бота

/lowprice 

Поиск отелей с низкой ценой

/highprice 

Поиск отелей с высокой ценой

/bestdeal 

Поиск отелей с ценой и расстоянием до центра города.

/history 

Вывод истории запросов пользователя.

После ввода одной из команд, запускающих поиск отелей, начинается цепочка опроса пользователя, по результатам которой формируется ответ, состоящий из списка подходящих под критерии отелей.

Далее пользователю выводятся отели по заданным им критериям. Все это сохраняется в базу данных.
